!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e,n){"use strict";t.exports=function(t){return new Promise(function(e,n){var i="text"in t?t.text:"";$.ajax({url:t.url,type:"type"in t?t.type:"post",data:"data"in t?t.data:{},dataType:"json",success:function(t){t&&"status"in t&&t.status>0?e(t.data):n("message"in t?t.message:i+"出错")},error:function(t){console.error(t),n(i+"超时")}})})}},,,,,,,,,,function(t,e,n){"use strict";t.exports={feedback:n(11)}},function(t,e,n){"use strict";var i={printF:function(t,e){return t.tooltip({placement:"left",title:e}).tooltip("show")},getParams:function(){var t=$("#f_name"),e=t.val(),n=$("#f_phone"),a=n.val(),r=$("#f_content"),s=r.val(),o={};return e?(o.name=e,a?(o.phone=parseInt(a),s?(o.content=s,o):(i.printF(r,"请输入留言内容"),!1)):(i.printF(n,"请输入手机号码"),!1)):(i.printF(t,"请输入姓名"),!1)},sendForm:function(t){return new Promise(function(e,n){return $.ajax({url:"/api/feedback",type:"post",data:t,dataType:"json",success:function(t){t&&"status"in t&&t.status>0?e():n("message"in t?t.message:"提交反馈出错")},error:function(t){console.error(t),n("提交反馈超时")}})})},setOneSubmit:function(){return $("#f_submit").one("click",function(){var t=i.getParams();t&&i.sendForm(t).then(function(){return alert("您的信息已经提交成功，我们会尽快与您联系！")}).catch(function(t){return alert(t)}),i.setOneSubmit()})},setInputListener:function(){$("#f_phone").on("afterpaste keyup",function(){var t=$(this);t.val(t.val().replace(/[^0-9]/g,""))}),$("#f_name,#f_phone,#f_content").on("keyup",function(){$(this).tooltip("destroy")})},init:function(){i.setOneSubmit(),i.setInputListener()}};t.exports=i.init},function(t,e,n){"use strict";t.exports=function(t){var e="";return t.forEach(function(t){e+='<div class="col-lg-3 production-item"><div class="production-icon"><img src="'+t.icon+'"><a href="/production/detail/'+t.id+'" class="production-layout" target="_blank"><div class="production-title">'+t.title+'</div><div class="production-abstract">'+(t.abstract||"")+"</div></a></div></div>"}),e}},,,function(t,e,n){"use strict";var i=n(10).feedback,a=n(0),r=n(16),s={production:function(t){return a({url:"/api/production/list",type:"post",data:t,message:"获取产品列表"})},news:function(t){return a({url:"/api/home/news/list",type:"get",data:t,message:"获取新闻列表"})},resourceCatalog:function(){return a({url:"/api/home/catalog/list?type=2",type:"get",message:"获取基地分类列表"})},resource:function(t){return a({url:"/api/resource/list",type:"post",data:{limit:12,cid:t},message:"获取基地列表"})}},o={initSwiper:function(){new Swiper("#news_swiper",{slidesPerView:1,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})},setProductionList:n(12),setNewsList:function(t){var e="";return t.forEach(function(t){e+='<a href="/news/detail/'+t.id+'" class="list-group-item list-group-item-info">\n    <h4 class="list-group-item-heading">'+t.name+'</h4>\n    <p class="list-group-item-text">'+t.abstract+"</p>\n</a>"}),e},setNewsBanner:function(t){var e="";return t.forEach(function(t){e+='<div class="swiper-slide">\n    <a href="/news/detail/'+t.id+'">\n        <div class=""><img src="/uploads'+t.icon+'" width="100%"></div>\n        <div class="mt-1e"><h3>'+t.name+'</h3></div>\n        <div class="mt-1e" style="font-size:16px;"><h4>'+t.abstract+"</h4></div>\n    </a>\n</div>"}),e},setResourceList:function(t){s.resource(t).then(function(e){var n="#resource_catalog_"+t+"_container";$("#resource_catalog_"+t+"_content").html(r.list(e)),Array.isArray(e)&&e.length>0?new Swiper(n,{slidesPerView:4,spaceBetween:30,slidesPerGroup:4,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}):$(n).find(".swiper-button-next").remove().end().find(".swiper-button-prev").remove()}).catch(alert)},setCatalog:function(t,e){$("#catalog_"+t).html(e.length>0?o.setProductionList(e):'<h2 class="ta-c">该分类下无产品</h2>')},initCatalog:function(){var t=parseInt($("#production_catalogs").find('a[data-toggle="tab"]').eq(0).data("sci"));s.production({limit:3,sci:t}).then(function(e){return o.setCatalog(t,e)}).catch(alert)},initNews:function(){s.news({limit:6}).then(function(t){$("#home_news_banner").html(o.setNewsBanner(t)),$("#home_news_list").html(o.setNewsList(t))}).catch(function(t){return alert(t)})},initResourceCatalog:function(){s.resourceCatalog().then(function(t){$("#resource_catalogs").html(r.catalogs(t)),$("#resource_list").html(r.tabList(t)),o.setResourceList(t[0].id)}).catch(alert)},init:function(){this.initSwiper(),this.initCatalog(),this.initNews(),this.initResourceCatalog()}},c={catalogChangeListener:function(){$("#production_catalogs").on("show.bs.tab",'a[data-toggle="tab"]',function(t){var e=$(t.target),n=parseInt(e.data("show")),i=parseInt(e.data("sci"));0===n&&(s.production({limit:4,sci:i}).then(function(t){return o.setCatalog(i,t)}).catch(function(t){return alert(t)}),e.data("show",1))}),$("#resource_catalogs").on("show.bs.tab",'a[data-toggle="tab"]',function(t){var e=$(t.target),n=parseInt(e.data("show")),i=parseInt(e.data("cid"));0===n&&(o.setResourceList(i),e.data("show",1))})},init:function(){this.catalogChangeListener()}};$(function(){o.init(),c.init(),i()})},function(t,e,n){"use strict";var i={catalogs:function(t){var e="",n=0;return t.forEach(function(t){e+='<li role="presentation" class="'+(0==n++?"active":"")+'"><a href="#resource_catalog_'+t.id+'" aria-controls="resource_catalog_'+t.id+'" role="tab" data-toggle="tab" data-show="'+(0==n++?1:0)+'" data-cid="'+t.id+'">'+t.name+"</a></li>"}),e},tabList:function(t){var e="",n=0;return t.forEach(function(t){e+='<div role="tabpanel" class="tab-pane resource-list '+(0==n++?"active":"")+'" id="resource_catalog_'+t.id+'"><div class="swiper-container" id="resource_catalog_'+t.id+'_container"><div class="swiper-wrapper" id="resource_catalog_'+t.id+'_content"></div><div class="swiper-pagination"></div><div class="swiper-button-next"></div><div class="swiper-button-prev"></div></div></div>'}),e},list:function(t){var e="";return Array.isArray(t)&&t.length>0?t.forEach(function(t){e+=i.item(t)}):e='<div class="container"><h2 class="ta-c mt-2e">该基地分类下无基地</h2></div>',e},item:function(t){return'<div class="swiper-slide"><div class="resource-item"><a href="/resource/detail/'+t.id+"?md5="+t.md5+'"><div class="resource-icon mt-1e"><img width="100%" src="'+t.icon+'"></div><div class="resource-title mt-1e"><h2>'+t.title+'</h2></div><div class="resource-abstract mt-1e">'+t.abstract+"</div></a></div></div>"}};t.exports=i}]);