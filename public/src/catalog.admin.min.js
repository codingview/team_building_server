!function(t){function a(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}var e={};a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},a.p="",a(a.s=21)}({0:function(t,a,e){"use strict";t.exports=function(t){return new Promise(function(a,e){var n="text"in t?t.text:"";$.ajax({url:t.url,type:"type"in t?t.type:"post",data:"data"in t?t.data:{},dataType:"json",success:function(t){t&&"status"in t&&t.status>0?a(t.data):e("message"in t?t.message:n+"出错")},error:function(t){console.error(t),e(n+"超时")}})})}},2:function(t,a,e){"use strict";t.exports={processing:"玩命加载中...",lengthMenu:"每页显示 _MENU_ 条",zeroRecords:"没有匹配记录",info:"共计: _TOTAL_ 条 第 _PAGE_ / _PAGES_ 页",infoEmpty:"共计: 0 条 ",infoFiltered:"",infoPostFix:"",search:"搜索:",loadingRecords:"载入中...",url:"",paginate:{first:"首页",previous:"上一页",next:"下一页",last:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}}},21:function(t,a,n){"use strict";var o=o||1,i=void 0,l=n(0),c={getForm:function(){return{id:parseInt($("#catalog_id").val()),name:$("#catalog_name").val(),sequence:parseInt($("#catalog_sequence").val()),type:o}},initModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";$("#catalog_id").val(t),$("#catalog_name").val(a),$("#catalog_sequence").val(e)},setAlert:function(t){}},r={add:function(t){return l({url:"/admin/catalog",type:"post",data:t,message:"新增分类"})},update:function(t){return l({url:"/admin/catalog",type:"put",data:t,message:"更新分类"})},del:function(t){return l({url:"/admin/catalog/"+t,type:"delete",message:"删除分类"})}},d={addCatalog:function(){$("#add_catalog").on("click",function(){$("#catalog_detail").modal("show")})},delCatalog:function(){$("#catalog_list").on("click",".catalog-delete",function(){r.del($(this).data("id")).then(function(){return i.ajax.reload()}).catch(c.setAlert)})},upCatalog:function(){$("#catalog_list").on("click",".catalog-update",function(){var t=$(this);c.initModal(parseInt(t.data("id")),t.data("name"),parseInt(t.data("sequence"))),$("#catalog_detail").modal("show")})},formOneSubmit:function(){$("#catalog_detail_submit").one("click",function(){var t=c.getForm();-1!==t.id?r.update(t).then(function(t){i.ajax.reload(),$("#catalog_detail").modal("hide")}).catch(c.setAlert(e)):(delete t.id,r.add(t).then(function(t){i.ajax.reload(),$("#catalog_detail").modal("hide")}).catch(c.setAlert(e))),d.formOneSubmit()})},init:function(){$("#catalog_detail").on("hidden.bs.modal",function(){c.initModal()}),this.addCatalog(),this.upCatalog(),this.delCatalog(),this.formOneSubmit()}};$(function(){i=n(22)(o),d.init()})},22:function(t,a,e){"use strict";t.exports=function(t){return $("#catalog_list").DataTable({language:e(2),paging:!1,searching:!1,ordering:!1,processing:!0,serverSide:!0,autoWidth:!0,stateSave:!1,ajax:{url:"/admin/catalog/list?type="+t,method:"post"},columns:[{title:"编号",width:"26px",data:"id"},{title:"分类名称",data:"name"},{title:"排序序号",data:"sequence"},{title:"操作",width:"136px",data:null,render:function(t){return'<button type="button" class="btn btn-info btn-xs ml-1e catalog-update" data-id="'+t.id+'" data-name="'+t.name+'" data-sequence="'+t.sequence+'">更新分类</button><button type="button" class="btn btn-danger btn-xs ml-1e catalog-delete" data-id="'+t.id+'">删除分类</button>'}}]})}}});