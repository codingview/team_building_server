!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}({0:function(t,e,n){"use strict";t.exports=function(t){return new Promise(function(e,n){var i="text"in t?t.text:"";$.ajax({url:t.url,type:"type"in t?t.type:"post",data:"data"in t?t.data:{},dataType:"json",success:function(t){t&&"status"in t&&t.status>0?e(t.data):n("message"in t?t.message:i+"出错")},error:function(t){console.error(t),n(i+"超时")}})})}},15:function(t,e,n){"use strict";n(5);var i=n(0),r=void 0,a={init:function(){return r=$("#user_list").DataTable({language:n(2),paginType:"full_numbers",lengthMenu:[[10,25,50],[10,25,50]],searching:!1,ordering:!1,processing:!0,serverSide:!0,autoWidth:!0,stateSave:!0,ajax:{url:"/admin/option/user/list",method:"post"},columns:[{title:"序号",width:"24px",data:"uid"},{title:"管理员",class:"",data:"title"},{title:"登录账号",class:"",data:"user_name"},{title:"创建时间",class:"",data:"created_at",render:function(t){return new Date(t).format("yyyy-MM-dd hh:mm:ss")}},{title:"修改时间",class:"",data:"updated_at",render:function(t){return new Date(t).format("yyyy-MM-dd hh:mm:ss")}},{title:"操作",width:"136px",data:null,render:function(t){return'<button class="btn btn-info btn-xs ml-1e user-update" data-uid="'+t.uid+'" data-un="'+t.user_name+'" data-title="'+t.title+'">修改信息</button>'+("admin"===t.user_name?"":'<button class="btn btn-danger btn-xs ml-1e user-remove" data-uid="'+t.uid+'">删除</button>')}}]})}},u={add:function(t){return i({url:"/admin/option/user",type:"post",data:t,message:"新增管理员"})},remove:function(t){return i({url:"/admin/option/user/"+t,type:"delete",message:"删除管理员"})},update:function(t){return i({url:"/admin/option/user/"+t.uid,type:"put",data:t,message:"更新管理员"})}},o={initForm:function(){$("#p_form").get(0).reset(),$("#u_uid").val(-1)},setForm:function(t,e){$("#u_name").val(t),$("#u_login").val(e)},getForm:function(){return{title:$("#u_name").val(),user_name:$("#u_login").val(),pwd:$("#u_pwd").val()}}},s={update:function(){$("#user_list").on("click",".user-update",function(){var t=$(this);o.setForm(t.data("title"),t.data("un")),$("#u_uid").val(t.data("uid")),$("#user_detail").modal("show")})},remove:function(){$("#user_list").on("click",".user-remove",function(){u.remove($(this).data("uid")).then(function(){return r.ajax.reload()}).catch(function(t){return alert(t)})})},initForm:function(){$("#user_detail").on("hidden.bs.modal",function(){return o.initForm()}),$("#u_reset").on("click",function(){return o.initForm()})},save:function(){$("#u_submit").one("click",function(){var t=parseInt($("#u_uid").val());if(-1===t)u.add(o.getForm()).then(function(){r.ajax.reload(),$("#user_detail").modal("hide")}).catch(function(t){return alert(t)});else{var e=o.getForm();e.uid=t,u.update(e).then(function(){r.ajax.reload(),$("#user_detail").modal("hide")}).catch(function(t){return alert(t)})}s.save()})},init:function(){this.initForm(),this.update(),this.remove(),this.save()}};$(function(){a.init(),s.init()})},2:function(t,e,n){"use strict";t.exports={processing:"玩命加载中...",lengthMenu:"每页显示 _MENU_ 条",zeroRecords:"没有匹配记录",info:"共计: _TOTAL_ 条 第 _PAGE_ / _PAGES_ 页",infoEmpty:"共计: 0 条 ",infoFiltered:"",infoPostFix:"",search:"搜索:",loadingRecords:"载入中...",url:"",paginate:{first:"首页",previous:"上一页",next:"下一页",last:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}}},5:function(t,e,n){"use strict";(function(){Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"w+":this.getDay(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t}})()}});