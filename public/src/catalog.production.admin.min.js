!function(n){function t(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e={};t.m=n,t.c=e,t.d=function(n,e,o){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=4)}({4:function(n,t,e){"use strict";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function n(t){o(this,n),this.id=t.id,this.name=t.name},i=void 0,a={catalogs:function(){return new Promise(function(n,t){return $.ajax({url:"/admin/production/catalog",method:"post",dataType:"json",success:function(e){e&&"status"in e&&e.status>0?n(e.data):t("message"in e?e.message:"获取数据出错")},error:function(n){console.error(n),t("请求超时")}})})},getNode:function(n){}},c={addHoverDom:function(n,t){var e=1,o=$("#"+t.tId+"_span"),r=$("#addBtn_"+t.tId);if(t.editNameFlag||r.length>0||2===t.grade)return!1;var a='<span class="button add" id="addBtn_'+t.tId+'" title="增加" onfocus="this.blur();"></span>';o.after(a);var c=$("#addBtn_"+t.tId);c&&c.bind("click",function(){return i.addNodes(t,{id:100+e,pId:t.id,name:"新的分类"+e++}),!1})},removeHoverDom:function(n,t){return $("#addBtn_"+t.tId).unbind().remove()},getNode:function(n){var t=new r(n);if(!("children"in n&&n.children instanceof Array&&n.children.length>0))return t;t.children=[],n.children.forEach(function(n){t.children.push(c.getNode(n))})},getTree:function(n){var t=[];return n=n[0].children,n.forEach(function(n){console.info(1,n);var t=c.getNode(n);console.info(2,t)}),t},catalogs:function(){a.catalogs().then(function(n){return i=$.fn.zTree.init($("#production_catalog"),{view:{addHoverDom:c.addHoverDom,removeHoverDom:c.removeHoverDom,selectedMulti:!1},edit:{enable:!0,removeTitle:"删除",renameTitle:"重命名",showRenameBtn:function(n,t){return!t.noEditBtn},showRemoveBtn:function(n,t){return!t.noEditBtn}}},[{name:"产品分类",open:!0,children:n,noEditBtn:!0}])}).catch(function(n){return alert(n)})},init:function(){this.catalogs()}},u={setOneSubmit:function(){$("#production_catalog_submit").one("click",function(){c.getTree(i.getNodes()),u.setOneSubmit()})},init:function(){this.setOneSubmit()}};$(function(){c.init(),u.init()})}});