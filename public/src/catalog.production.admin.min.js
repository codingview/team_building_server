!function(t){function e(n){if(a[n])return a[n].exports;var o=a[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=29)}({0:function(t,e,a){"use strict";t.exports=function(t){return new Promise(function(e,a){var n="text"in t?t.text:"";$.ajax({url:t.url,type:"type"in t?t.type:"post",data:"data"in t?t.data:{},dataType:"json",success:function(t){t&&"status"in t&&t.status>0?e(t.data):a("message"in t?t.message:n+"出错")},error:function(t){console.error(t),a(n+"超时")}})})}},2:function(t,e,a){"use strict";t.exports={processing:"玩命加载中...",lengthMenu:"每页显示 _MENU_ 条",zeroRecords:"没有匹配记录",info:"共计: _TOTAL_ 条 第 _PAGE_ / _PAGES_ 页",infoEmpty:"共计: 0 条 ",infoFiltered:"",infoPostFix:"",search:"搜索:",loadingRecords:"载入中...",url:"",paginate:{first:"首页",previous:"上一页",next:"下一页",last:"末页"},oAria:{sSortAscending:": 以升序排列此列",sSortDescending:": 以降序排列此列"}}},29:function(t,e,a){"use strict";var n=a(0),o={deleteCatalog:function(t,e){return n({url:"/admin/production/catalog/"+e+"/"+t,type:"delete",message:"删除产品分类"})},saveCatalog:function(t,e){return-1===e.id?(delete e.id,n({url:"/admin/production/catalog/"+t,type:"post",data:e,message:"新增产品分类"})):n({url:"/admin/production/catalog/"+t,type:"put",data:e,message:"新增产品分类"})}},i={getForm:function(t){var e={},a=parseInt($("#"+t+"_id").val()),n=$("#"+t+"_name").val(),o=parseInt($("#"+t+"_sequence").val()),i=$("#"+t+"_home_show").is(":checked")||!1;if(!n)return alert("请输入分类名称"),!1;if(!(o>=0))return alert("请输入排序值"),!1;if(e={id:a,name:n,sequence:o,home_show:i},"second"===t){var r=parseInt($("#second_first_catalog_id").val());if(!(r>=0))return alert("请输入一级分类编号"),!1;e.first_catalog_id=r}return e},setForm:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";$("#"+t+"_id").val(e),$("#"+t+"_name").val(a),$("#"+t+"_sequence").val(n),$("#"+t+"_home_show").prop("checked",o),"second"===t&&$("#second_first_catalog_id").val(i)}},r={deleteCatalog:function(){var t=function(t,e){o.deleteCatalog(t,e).then(function(){return s.reload(e)}).catch(alert)};$("#first_catalog_list").on("click",".del-first",function(e){var a=parseInt($(e.target).data("id"));t(a,"first")}),$("#second_catalog_list").on("click",".del-second",function(e){var a=parseInt($(e.target).data("id"));t(a,"second")})},saveCatalog:function(t){$("#"+t+"_submit").one("click",function(e){var a=i.getForm(t);a?o.saveCatalog(t,a).then(function(){i.setForm(t),s.reload(t),r.saveCatalog(t)}).catch(function(e){r.saveCatalog(t),alert(e)}):r.saveCatalog(t)})},updateCatalog:function(){var t=function(t,e){var a=t.data("id"),n=t.data("name"),o=t.data("sequence"),r=t.data("home"),s="";"second"===e&&(s=t.data("first")),i.setForm(e,a,n,o,r,s)};$("#first_catalog_list").on("click",".up-first",function(e){t($(e.target),"first")}),$("#second_catalog_list").on("click",".up-second",function(e){t($(e.target),"second")})},init:function(){this.deleteCatalog(),this.saveCatalog("first"),this.saveCatalog("second"),this.updateCatalog()}},s={reload:function(t){return s[t+"TableApi"].ajax.reload()},firstTableApi:null,secondTableApi:null,firstCatalogTable:function(){return s.firstTableApi=$("#first_catalog_list").DataTable({language:a(2),paging:!1,searching:!1,ordering:!1,processing:!0,serverSide:!0,autoWidth:!0,stateSave:!1,ajax:{url:"/admin/production/catalog/first/list",method:"post"},columns:[{title:"编号",width:"26px",data:"id"},{title:"分类名称",data:"name"},{title:"排序值",data:"sequence"},{title:"操作",data:null,render:function(t){return'<button class="btn btn-info btn-xs ml-1e up-first" data-id="'+t.id+'" data-name="'+t.name+'" data-sequence="'+t.sequence+'" data-home="'+t.home_show+'">修改</button><button class="btn btn-danger btn-xs ml-1e del-first" data-id="'+t.id+'">删除</button>'}}]})},secondCatalogTable:function(){return s.secondTableApi=$("#second_catalog_list").DataTable({language:a(2),paging:!1,searching:!1,ordering:!1,processing:!0,serverSide:!0,autoWidth:!0,stateSave:!1,ajax:{url:"/admin/production/catalog/second/list",method:"post"},columns:[{title:"编号",width:"26px",data:"id"},{title:"分类名称",data:"name"},{title:"一级分类编号",data:"first_catalog_id"},{title:"排序值",data:"sequence"},{title:"首页是否显示",data:"home_show",render:function(t){return t?"是":"否"}},{title:"操作",data:null,render:function(t){return'<button class="btn btn-info btn-xs ml-1e up-second" data-id="'+t.id+'" data-name="'+t.name+'" data-sequence="'+t.sequence+'" data-home="'+t.home_show+'" data-first="'+t.first_catalog_id+'">修改</button><button class="btn btn-danger btn-xs ml-1e del-second" data-id="'+t.id+'">删除</button>'}}]})}};$(function(){s.firstCatalogTable(),s.secondCatalogTable(),r.init()})}});