!function(t){function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=12)}({12:function(t,n,e){"use strict";var o=window.wangEditor,r=void 0,i={catalogs:e(2).catalogs,add:function(t){return new Promise(function(n,e){return $.ajax({url:"/admin/production/add",type:"put",data:t,dataType:"json",success:function(t){t&&"status"in t&&t.status>0?n():e("message"in t?t.message:"新增产品出错")},error:function(t){console.error(t),e("新增产品超时")}})})}},c={editor:function(){r=new o("#p_editor"),r.customConfig.menus=e(4),r.customConfig.uploadImgShowBase64=!0,r.customConfig.uploadImgMaxLength=5,r.customConfig.pasteFilterStyle=!1,r.create()},catalogs:function(){return i.catalogs().then(function(t){return $("#p_catalog_id").html(c.setCatalog(t))}).catch(function(t){console.error(t),alert("获取分类列表出错")})},setCatalog:function(t){var n="";return t.forEach(function(t){n+='<optgroup label="'+t.name+'">',"children"in t&&t.children instanceof Array&&t.children.length>0&&t.children.forEach(function(t){n+='<option value="'+t.id+'">'+t.name+"</option>"}),n+="</optgroup>"}),n},getForm:function(){for(var t={},n=$("#p_form"),e=n.find("input,select"),o=0,r=e.length;o<r;o++){var i=e.eq(o),c=i.attr("id").replace(/p_/g,"");"text"===c||("top"===c?t.top=i.is(":checked"):t[c]=i.val())}return t},init:function(){this.editor(),this.catalogs()}},a={setOneSubmit:function(){$("#p_submit").one("click",function(){var t=c.getForm();t.rich_text=r.txt.html(),t.text=r.txt.text(),t.sequence=t.top?0:99,delete t.top,t.name?i.add(t).then(function(t){}).catch(function(t){alert(t)}):alert("请输入产品名称"),a.setOneSubmit()})},reset:function(){$("#p_reset").on("click",function(){r.txt.clear()})},init:function(){this.setOneSubmit(),this.reset()}};$(function(){c.init(),a.init()})},2:function(t,n,e){"use strict";t.exports={catalogs:function(){return new Promise(function(t,n){return $.ajax({url:"/admin/production/catalog/list",type:"get",dataType:"json",success:function(e){e&&"status"in e&&e.status>0?t(e.data):n("message"in e?e.message:"获取分类列表出错")},error:function(t){console.error(t),n("获取分类列表超时")}})})}}},4:function(t,n,e){"use strict";t.exports=["head","bold","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","emoticon","image","table","code","undo","redo"]}});